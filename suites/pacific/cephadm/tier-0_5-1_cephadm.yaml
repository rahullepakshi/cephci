#===============================================================================================
#-------------------------------------
#----- Ceph code changes in 5.1 ------
#--------------------------------------
# * NFS deployment with pool and namespace is not supported.
#
#--------------------------------------
#
# Tier-0 test cases for
#    - Bootstrap
#    - Host management
#      - Add/Remove nodes
#      - SetAddress
#      - Attach/remove node labels
#    - Ceph role Service deployment with multiple options,
#    - Removal of services
#===============================================================================================
tests:
  - test:
      name: Install ceph pre-requisites
      desc: installation of ceph pre-requisites
      module: install_prereq.py
      abort-on-fail: true
  - test:
      name: Cephadm Bootstrap with custom dashboard credentials
      desc: Bootstrap with initial-dashboard user and password option
      module: test_bootstrap.py
      polarion-id: CEPH-83573719
      config:
        command: bootstrap
        base_cmd_args:
          verbose: true
        args:
          registry-url: registry.redhat.io
          custom_image: true
          mon-ip: "node1"
          orphan-initial-daemons: true
          skip-monitoring-stack: true
          initial-dashboard-user: admin123
          initial-dashboard-password: admin123
          fsid: f64f341c-655d-11eb-8778-fa163e914bcc
      destroy-cluster: false
      abort-on-fail: true
  - test:
      name: Add all hosts to ceph cluster
      desc: Add all host node with IP address and labels
      module: test_host.py
      polarion-id:
      config:
        service: host
        command: add_hosts
        args:
          nodes: []
          attach_ip_address: true
          labels: apply-all-labels
      destroy-cluster: false
      abort-on-fail: true
  - test:
      name: Apply Monitor using label
      desc: Apply monitor using label mon
      abort-on-fail: true
      module: test_mon.py
      polarion-id: CEPH-83573772
      config:
        command: apply
        service: mon
        base_cmd_args:
          verbose: true
        args:
          placement:
            label: mon
  - test:
      name: Apply Manager service
      desc: Apply manager service with label option
      module: test_mgr.py
      polarion-id: CEPH-83573777
      config:
        command: apply
        service: mgr
        base_cmd_args:
          verbose: true
        args:
          placement:
            label: mgr
            sep: " "
      destroy-cluster: false
      abort-on-fail: true
  - test:
      name: Apply OSD Service
      desc: Apply OSD service with all available devices
      module: test_osd.py
      polarion-id: CEPH-83573735
      config:
        command: apply
        service: osd
        base_cmd_args:
          verbose: true
        args:
          all-available-devices: true
      destroy-cluster: false
      abort-on-fail: true
  - test:
      name: Replace OSD daemon
      desc: Replace single OSD daemon from the cluster
      module: test_osd.py
      config:
        command: rm
        base_cmd_args:
          verbose: true
        pos_args:
          - 1
        args:
          - "--replace"
      destroy-cluster: false
      abort-on-fail: true
  - test:
      name: Add OSD
      desc: Add raw osd on node1
      module: test_daemon.py
      config:
        command: add
        service: osd
        pos_args:
          - "node1"
          - "/dev/vdb"
      destroy-cluster: false
      abort-on-fail: true
